{% extends 'base_accounts.html' %}
{% load static %}

{% block title %}
행성 프로필 생성
{% endblock title %}

{% block content %}
{% comment %} <p class="text-4xl mb-3">Create Account</p> {% endcomment %}
<form id="profile-form" action="{% url 'planets:planet_join' planet.name %}" method="POST" enctype="multipart/form-data">
  {% csrf_token %}

  <div role="status" class="p-4 border rounded shadow  md:p-6 dark:border-0">
    <!-- 배경사진 -->
    <div class="flex items-center justify-center h-48 mb-4 bg-gray-300 rounded dark:bg-gray-700">
      <div style="position: relative; display: inline-block;">
        <img class="rounded-md" id="preview2" style="height: 195px; width: 500px;">
        <button onclick="document.getElementById('background_image').click();" class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 block text-lg font-medium text-slate-300">
          <span class="material-symbols-outlined text-4xl">
            add_photo_alternate 
          </span>
          <br>
          <span class="text-sm">background_image</span>
        </button>
      </div>
      <input onchange="readURL2(this);" type="file" id="background_image" name="background_image" value="{{ user.background_image }}" class="form-input mt-1 rounded-md bg-[#101013]" style="display: none;">  
    </div>
    
    <div class="flex justify-around items-center mt-4 space-x-3">
      <!-- 프로필 사진 -->
      <div style="position: relative; width: 120px; height: 120px;">
        <img class="absolute inset-0 m-auto rounded-md" id="preview1" style="width: 100%; height: 100%;">
        <button onclick="document.getElementById('profile_image').click();" class="absolute inset-0 m-auto block text-lg font-medium text-slate-300" style="top: 50%; transform: translateY(-50%);">
          <span class="material-symbols-outlined text-4xl">
            person_add
          </span>
          <br>
          <span class="text-sm">profile_image</span>
        </button>
        <input onchange="readURL1(this);" type="file" id="profile_image" name="profile_image" value="{{ user.profile_image }}" class="form-input mt-1 rounded-md bg-[#101013]" style="display: none;">
      </div>
      <!-- ID -->
      <div class="">
        <input type="text" id="nickname" name="nickname" value="{{ user.nickname }}" class="form-input mt-1 rounded-md bg-[#101013]" placeholder="ID" required>
      </div>
    </div>
  </div>
  <div class="grid my-4">
    <button id="create-profile-btn" class="btn bg-[#ffd951] text-white font-bold py-2 px-4 rounded" type="submit">Create</button>
  </div>
</form>

{% comment %} 
<div>
  <form id="profile-form" action="{% url 'planets:planet_join' planet.name %}" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <img id="preview1">
    <button onclick="document.getElementById('profile_image').click();" class="ml-1 mt-2 block text-lg font-medium text-slate-300"><span class="material-symbols-outlined">
      person_add
      </span></button>
    <input onchange="readURL1(this);" type="file" id="profile_image" name="profile_image" value="{{ user.profile_image }}" class="form-input mt-1 rounded-md bg-[#101013]" style="display: none;">
    
    <img id="preview2">
    <button onclick="document.getElementById('background_image').click();" class="ml-1 mt-2 block text-lg font-medium text-slate-300"><span class="material-symbols-outlined">
      add_photo_alternate
      </span></button>
    <input onchange="readURL2(this);" type="file" id="background_image" name="background_image" value="{{ user.background_image }}" class="form-input mt-1 rounded-md bg-[#101013]" style="display: none;">
    
    <div class="grid my-4">
      <button id="create-profile-btn" class="btn bg-[#ffd951] text-white font-bold py-2 px-4 rounded" type="submit">행성 프로필 생성</button>
    </div>
  </form>
</div> 
{% endcomment %}

{% endblock content %}

{% block script %}
<script>
  function readURL1(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('preview1').src = e.target.result;
      };
      reader.readAsDataURL(input.files[0]);
    } else {
      document.getElementById('preview1').src = "";
    }
  }
  function readURL2(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('preview2').src = e.target.result;
      };
      reader.readAsDataURL(input.files[0]);
    } else {
      document.getElementById('preview2').src = "";
    }
  }
</script>
{% endblock script %}